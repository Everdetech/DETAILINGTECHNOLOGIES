<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>DetailingTechnologies</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f5f5f5;
      margin: 0;
      padding: 0;
    }

    header {
      background-color: #222;
      color: white;
      padding: 20px;
      text-align: center;
    }

    section.card {
      background: white;
      margin: 30px auto;
      padding: 20px;
      border-radius: 10px;
      max-width: 800px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }

    .product {
      margin-bottom: 20px;
      border-bottom: 1px solid #ddd;
      padding-bottom: 15px;
      display: flex;
      gap: 15px;
      align-items: center;
    }

    .product img {
      width: 150px;
      border-radius: 10px;
      object-fit: contain;
    }

    footer {
      background-color: #222;
      color: white;
      text-align: center;
      padding: 10px;
    }

    /* Estilos para panel admin */
    #admin-panel {
      background: #fff;
      border-radius: 10px;
      max-width: 800px;
      margin: 20px auto;
      padding: 20px;
      box-shadow: 0 0 15px rgba(0,0,0,0.15);
    }

    #admin-panel input, 
    #admin-panel textarea {
      width: 100%;
      padding: 8px;
      margin: 8px 0;
      box-sizing: border-box;
      border-radius: 5px;
      border: 1px solid #ccc;
      font-size: 14px;
      font-family: inherit;
    }

    #admin-panel button.btn {
      background-color: #222;
      color: white;
      border: none;
      padding: 10px 15px;
      cursor: pointer;
      border-radius: 5px;
      font-size: 15px;
      margin-top: 10px;
    }

    #admin-panel button.btn:hover {
      background-color: #444;
    }
  </style>
</head>
<body>

  <header>
    <h1>DetailingTechnologies</h1>
    <p>Productos tecnológicos a tu alcance</p>
  </header>

  <section class="card" id="productos">
    <h2>Productos</h2>
    <!-- Aquí se agregan los productos dinámicamente -->
  </section>

  <!-- Panel oculto para administrar, solo visible si estás autorizado -->
  <div id="admin-panel" style="display:none;"></div>

  <footer>
    <p>© 2025 DetailingTechnologies - Todos los derechos reservados</p>
  </footer>

  <script>
    const claveAcceso = "TUTITAOLIVER25";
    const productosSection = document.getElementById("productos");
    const adminPanel = document.getElementById("admin-panel");

    // Productos almacenados localmente (puedes cargar desde servidor si quieres)
    let productos = JSON.parse(localStorage.getItem("productos")) || [
      {
        imagen: "Users/evers/Pictures/UP/UP.jpg",
        nombre: "ARDUINO UNO R3 SMD",
        descripcion: "Placa compatible para proyectos electrónicos, ideal para aprender robótica y automatización.",
        precio: "L 450"
      }
    ];

    // Datos de contacto (WhatsApp y dirección)
    let contacto = JSON.parse(localStorage.getItem("contacto")) || {
      whatsapp: "92758062",
      direccion: "Detalle tu dirección aquí"
    };

    function mostrarProductos() {
      productosSection.innerHTML = "<h2>Productos</h2>";
      productos.forEach((prod, i) => {
        const div = document.createElement("div");
        div.className = "product";
        div.innerHTML = `
          <img src="${prod.imagen}" alt="${prod.nombre}" />
          <div>
            <h3>${prod.nombre}</h3>
            <p>${prod.descripcion}</p>
            <p><strong>Precio:</strong> ${prod.precio}</p>
          </div>
        `;
        productosSection.appendChild(div);
      });

      // Mostrar contacto abajo
      const contactoDiv = document.createElement("div");
      contactoDiv.style.marginTop = "30px";
      contactoDiv.innerHTML = `
        <h2>Contacto</h2>
        <p><strong>WhatsApp:</strong> ${contacto.whatsapp}</p>
        <p><strong>Dirección:</strong> ${contacto.direccion}</p>
      `;
      productosSection.appendChild(contactoDiv);
    }

    mostrarProductos();

    // Verifica si ya tienes acceso autorizado
    if (localStorage.getItem("adminToken") === "autorizado") {
      activarModoAdmin();
    } else {
      // Te pregunta si quieres activar modo admin
      const deseaAcceder = confirm("¿Eres administrador y quieres activar MODIPRO?");
      if (deseaAcceder) {
        const clave = prompt("Ingresa la clave de administrador:");
        if (clave === claveAcceso) {
          localStorage.setItem("adminToken", "autorizado");
          activarModoAdmin();
        } else {
          alert("Clave incorrecta");
        }
      }
    }

    function activarModoAdmin() {
      adminPanel.style.display = "block";
      adminPanel.innerHTML = `
        <section class="card">
          <h2>Panel MODIPRO</h2>

          <h3>Agregar producto</h3>
          <input type="file" id="img-input" accept="image/*" />
          <input type="text" id="nombre" placeholder="Nombre del producto" />
          <textarea id="descripcion" placeholder="Descripción"></textarea>
          <input type="text" id="precio" placeholder="Precio" />
          <button class="btn" onclick="agregarProducto()">Agregar</button>

          <h3>Actualizar contacto</h3>
          <input type="text" id="nuevo-wa" placeholder="Nuevo número de WhatsApp (sin + ni espacios)" value="${contacto.whatsapp}" />
          <input type="text" id="nueva-direccion" placeholder="Dirección o ubicación" value="${contacto.direccion}" />
          <button class="btn" onclick="actualizarContacto()">Actualizar contacto</button>

          <button class="btn" style="background:#a33; margin-top:20px;" onclick="cerrarSesion()">Cerrar MODIPRO</button>
        </section>
      `;
    }

    function agregarProducto() {
      const inputImg = document.getElementById("img-input");
      const nombre = document.getElementById("nombre").value.trim();
      const descripcion = document.getElementById("descripcion").value.trim();
      const precio = document.getElementById("precio").value.trim();

      if (!inputImg.files[0]) {
        alert("Por favor, selecciona una imagen.");
        return;
      }
      if (!nombre || !descripcion || !precio) {
        alert("Por favor, completa todos los campos.");
        return;
      }

      const reader = new FileReader();
      reader.onload = function(e) {
        const imagenData = e.target.result;
        productos.push({
          imagen: imagenData,
          nombre,
          descripcion,
          precio
        });
        localStorage.setItem("productos", JSON.stringify(productos));
        mostrarProductos();
        alert("Producto agregado correctamente.");
        // Limpia campos
        document.getElementById("img-input").value = "";
        document.getElementById("nombre").value = "";
        document.getElementById("descripcion").value = "";
        document.getElementById("precio").value = "";
      };
      reader.readAsDataURL(inputImg.files[0]);
    }

    function actualizarContacto() {
      const nuevoWa = document.getElementById("nuevo-wa").value.trim();
      const nuevaDireccion = document.getElementById("nueva-direccion").value.trim();

      if (!nuevoWa || !nuevaDireccion) {
        alert("Por favor, completa todos los campos de contacto.");
        return;
      }

      contacto.whatsapp = nuevoWa;
      contacto.direccion = nuevaDireccion;
      localStorage.setItem("contacto", JSON.stringify(contacto));
      mostrarProductos();
      alert("Contacto actualizado correctamente.");
    }

    function cerrarSesion() {
      localStorage.removeItem("adminToken");
      alert("Has cerrado MODIPRO.");
      location.reload();
    }
  </script>
</body>
</html>
